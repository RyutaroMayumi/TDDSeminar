# TDDセミナー実習
## 課題：整数閉区間
- 問題：整数閉区間を示すクラス（あるいは構造体）をつくりたい。 整数閉区間オブジェクトは下端点と上端点を持ち、文字列表現も返せる（例: 下端点 3, 上端点 8 の整数閉区間の文字列表記は "[3,8]"）。ただし、上端点より下端点が大きい閉区間を作ることはできない。整数の閉区間は指定した整数を含むかどうかを判定できる。また、別の閉区間と等価かどうかや、完全に含まれるかどうかも判定できる。
## テストの準備
### プロジェクト
```
.
├── CMakeLists.txt
├── build
├── src
│   ├── CMakeLists.txt
│   ├── ClosedRange.c
│   ├── ClosedRange.h
│   └── main.c
└── test
    ├── CMakeLists.txt
    └── ClosedRange_test.cpp
```
- ---
### テストコード
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {
    TEST(ClosedRangeTest, FailAnyway) {
        FAIL(); // 最初はわざと失敗させる　⇒　想定通りに失敗することを確認！
    }
}
```
- ---
### 実装
- ヘッダファイル
```
#ifndef GTEST_CLOSEDRANGE_H_
#define GTEST_CLOSEDRANGE_H_

#endif // GTEST_CLOSEDRANGE_H_
```
- Cファイル
```
#include "ClosedRange.h"
```
- ---
### テスト結果（RED）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ClosedRangeTest
[ RUN      ] ClosedRangeTest.FailAnyway
/mnt/c/Users/user/Documents/Workspace/Projects/TDDSeminar/ClosedRange/test/ClosedRange_test.cpp:10: Failure
Failed
[  FAILED  ] ClosedRangeTest.FailAnyway (0 ms)
[----------] 1 test from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 0 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] ClosedRangeTest.FailAnyway

 1 FAILED TEST

```
- ---
## 1週目
### ステップ⓪　ToDoリストを作る
- [ ] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [ ] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること
- ---
### ステップ①　テストコードを書く
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        // 実行
        struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }
    
}
```

- ---
### ステップ②　テストを失敗させる（RED）
- createClosedRange() が未定義のためビルドエラー（RED）
```
[ 16%] Building C object src/CMakeFiles/ClosedRange.dir/ClosedRange.c.o
[ 33%] Linking C static library libClosedRange.a
[ 33%] Built target ClosedRange
[ 50%] Building C object src/CMakeFiles/Demo.dir/main.c.o
[ 66%] Linking C executable Demo
[ 66%] Built target Demo
[ 83%] Building CXX object test/CMakeFiles/Test.dir/ClosedRange_test.cpp.o
/mnt/c/Users/user/Documents/Workspace/Projects/TDDSeminar/ClosedRange/test/ClosedRange_test.cpp: In member function ‘virtual void {anonymous}::ClosedRangeTest_CreateClosedRange3To8_Test::TestBody()’:
/mnt/c/Users/user/Documents/Workspace/Projects/TDDSeminar/ClosedRange/test/ClosedRange_test.cpp:18:28: error: variable ‘{anonymous}::ClosedRangeTest_CreateClosedRange3To8_Test::TestBody()::ClosedRange closedRange’ has initializer but incomplete type
         struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
                            ^~~~~~~~~~~
/mnt/c/Users/user/Documents/Workspace/Projects/TDDSeminar/ClosedRange/test/ClosedRange_test.cpp:18:42: error: ‘createClosedRange’ was not declared in this scope
         struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
                                          ^~~~~~~~~~~~~~~~~
/mnt/c/Users/user/Documents/Workspace/Projects/TDDSeminar/ClosedRange/test/ClosedRange_test.cpp:18:42: note: suggested alternative: ‘ClosedRange’
         struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
                                          ^~~~~~~~~~~~~~~~~
                                          ClosedRange
test/CMakeFiles/Test.dir/build.make:62: recipe for target 'test/CMakeFiles/Test.dir/ClosedRange_test.cpp.o' failed
make[2]: *** [test/CMakeFiles/Test.dir/ClosedRange_test.cpp.o] Error 1
CMakeFiles/Makefile2:179: recipe for target 'test/CMakeFiles/Test.dir/all' failed
make[1]: *** [test/CMakeFiles/Test.dir/all] Error 2
Makefile:94: recipe for target 'all' failed
make: *** [all] Error 2

```
- ---
### ステップ③　プロダクションコードを書く
- ヘッダファイル
```
#ifndef GTEST_CLOSEDRANGE_H_
#define GTEST_CLOSEDRANGE_H_

struct ClosedRange {
    int lowerEndpoint;
    int upperEndpoint;
};

struct ClosedRange createClosedRange(int lowerEndpoint, int upperEndpoint);

#endif // GTEST_CLOSEDRANGE_H_
```
- Cファイル
```
#include "ClosedRange.h"

struct ClosedRange createClosedRange(int lowerEndpoint, int upperEndpoint)
{
    struct ClosedRange closedRange = {3,8};
    return closedRange;
}
```
- ---
### ステップ④　テストを成功させる（GREEN）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[----------] 1 test from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```
- ---
### ステップ⑤　リファクタリングする
```
#include "ClosedRange.h"

struct ClosedRange createClosedRange(int lowerEndpoint, int upperEndpoint)
{
    // struct ClosedRange closedRange = {3,8};
    // return closedRange;
    return (struct ClosedRange){3,8};
}
```
- テスト結果
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[----------] 1 test from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.
```
- ---
## 2週目
### ステップ⓪　ToDoリストを作る
- [ ] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [X] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること　⇒　仮実装
	- [ ] 下端点1, 上端点10を指定して、整数閉区間構造体が作れること　⇒　三角測量
- ---
### ステップ①　テストコードを書く
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        // 実行
        struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        // 実行
        struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

}
```
- ---
### ステップ②　テストを失敗させる（RED）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
/mnt/c/Users/user/Documents/Workspace/Projects/TDDSeminar/ClosedRange/test/ClosedRange_test.cpp:31: Failure
Expected equality of these values:
  lowerEndpoint
    Which is: 1
  closedRange.lowerEndpoint
    Which is: 3
[  FAILED  ] ClosedRangeTest.CreateClosedRange1To10 (1 ms)
[----------] 2 tests from ClosedRangeTest (1 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 1 test.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] ClosedRangeTest.CreateClosedRange1To10

 1 FAILED TEST
```
- ---
### ステップ③　プロダクションコードを書く
- Cコード
```
#include "ClosedRange.h"

struct ClosedRange createClosedRange(int lowerEndpoint, int upperEndpoint)
{
    // return (struct ClosedRange){3,8};
    return (struct ClosedRange){lowerEndpoint, upperEndpoint};
}
```
- ---
### ステップ④　テストを成功させる（GREEN）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[----------] 2 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 2 tests.
```
- ---
### ステップ⑤　リファクタリングする
- 特になし
- ---
## 3週目
### ステップ⓪　ToDoリストを作る
- [X] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [X] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること　⇒　仮実装
	- [X] 下端点1, 上端点10を指定して、整数閉区間構造体が作れること　⇒　三角測量
- [ ] 上端点より下端点が多きときは、整数閉区間が作れないこと
	- [ ] 下端点8, 上端点3を指定したときは、整数閉区間が作れないこと
	- ※C99のboolを使用して作れたかどうかを返す
- ---
### ステップ①　テストコードを書く
- 関数の仕様変更が必要なことが判明
    - （テクニック）インタフェースの異なる新しい関数を追加する
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        // 実行
        struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        // 実行
        struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, NewCreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        // 実行
        bool created = newCreateClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, NewCreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        struct ClosedRange closedRange;
        // 実行
        bool created = newCreateClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange8To3Failure) {
        // 前準備
        int lowerEndpoint = 8;
        int upperEndpoint = 3;
        struct ClosedRange closedRange;
        // 実行
        bool created = newCreateClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(false, created);
    }
}
```
- ---
### ステップ②　テストを失敗させる（RED）
- newCreateClosedRange() が未定義のためビルドエラー（RED）
- ---
### ステップ③　プロダクションコードを書く
- ヘッダファイル
```
#ifndef GTEST_CLOSEDRANGE_H_
#define GTEST_CLOSEDRANGE_H_

struct ClosedRange {
    int lowerEndpoint;
    int upperEndpoint;
};

struct ClosedRange createClosedRange(int lowerEndpoint, int upperEndpoint);
bool newCreateClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange);

#endif // GTEST_CLOSEDRANGE_H_
```
- Cファイル
```
#include "ClosedRange.h"

struct ClosedRange createClosedRange(int lowerEndpoint, int upperEndpoint)
{
    return (struct ClosedRange){lowerEndpoint, upperEndpoint};
}

bool newCreateClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return  false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return  true;
}
```
- ---
### ステップ④　テストを成功させる（GREEN）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 5 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 5 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (1 ms)
[ RUN      ] ClosedRangeTest.NewCreateClosedRange3To8
[       OK ] ClosedRangeTest.NewCreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.NewCreateClosedRange1To10
[       OK ] ClosedRangeTest.NewCreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.NewCreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.NewCreateClosedRange8To3Failure (0 ms)
[----------] 5 tests from ClosedRangeTest (1 ms total)

[----------] Global test environment tear-down
[==========] 5 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 5 tests.
```
- ---
### ステップ⑤　リファクタリングする
- createClosedRange() の内容を newCreateClosedRange() の内容で置き換える
- ただし、関数名が変更されるため、以前のテストコードもリファクタリングの対象になる。
- テストコード
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    // TEST(ClosedRangeTest, CreateClosedRange3To8) {
    //     // 前準備
    //     int lowerEndpoint = 3;
    //     int upperEndpoint = 8;
    //     // 実行
    //     struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
    //     // 検証
    //     ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
    //     ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    // }

    // TEST(ClosedRangeTest, CreateClosedRange1To10) {
    //     // 前準備
    //     int lowerEndpoint = 1;
    //     int upperEndpoint = 10;
    //     // 実行
    //     struct ClosedRange closedRange = createClosedRange(lowerEndpoint, upperEndpoint);
    //     // 検証
    //     ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
    //     ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    // }

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange8To3Failure) {
        // 前準備
        int lowerEndpoint = 8;
        int upperEndpoint = 3;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(false, created);
    }

}
```
- ヘッダファイル
```
#ifndef GTEST_CLOSEDRANGE_H_
#define GTEST_CLOSEDRANGE_H_

#include <stdbool.h>

struct ClosedRange {
    int lowerEndpoint;
    int upperEndpoint;
};

// struct ClosedRange createClosedRange(int lowerEndpoint, int upperEndpoint);
bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange);

#endif  // GTEST_CLOSEDRANGE_H_
```
- Cファイル
```
#include "ClosedRange.h"

// struct ClosedRange createClosedRange(int lowerEndpoint, int upperEndpoint)
// {
//     return (struct ClosedRange){lowerEndpoint, upperEndpoint};
// }

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return true;
}
```
- テスト結果
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 3 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 3 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[----------] 3 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 3 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 3 tests.
```
- ---
## 4週目
### ステップ⓪　ToDoリストを作る
- [X] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [X] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること　⇒　仮実装
	- [X] 下端点1, 上端点10を指定して、整数閉区間構造体が作れること　⇒　三角測量
- [X] 上端点より下端点が多きときは、整数閉区間が作れないこと
	- [X] 下端点8, 上端点3を指定したときは、整数閉区間が作れないこと
	- ※C99のboolを使用して作れたかどうかを返す
- [ ] 指定した整数を含むかどうかを判定できること
	- [ ] 下端点3, 上端点8の整数閉区間が、5を含むと判定できること
- ---
### ステップ①　テストコードを書く
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange8To3Failure) {
        // 前準備
        int lowerEndpoint = 8;
        int upperEndpoint = 3;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(false, created);
    }

    TEST(ClosedRangeTest, ClosedRange3To8Contains5) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 5;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(true, contained);
    }

}
```
- ---
### ステップ②　テストを失敗させる（RED）
- closedRangeContains() が未定義のためビルドエラー（RED）
- ---
### ステップ③　プロダクションコードを書く
- ヘッダファイル
```
#ifndef GTEST_CLOSEDRANGE_H_
#define GTEST_CLOSEDRANGE_H_

#include <stdbool.h>

struct ClosedRange {
    int lowerEndpoint;
    int upperEndpoint;
};

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange);
bool closedRangeContains(struct ClosedRange* closedRange, int n);

#endif  // GTEST_CLOSEDRANGE_H_
```
- Cファイル（最速でテストを通るコードを書く！）
```
#include "ClosedRange.h"

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return true;
}

bool closedRangeContains(struct ClosedRange* closedRange, int n)
{
    return true;
}
```
- ---
### ステップ④　テストを成功させる（GREEN）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 4 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 4 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[----------] 4 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 4 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 4 tests.
```
- ---
### ステップ⑤　リファクタリングする
- 特になし
- ---
## 5週目
### ステップ⓪　ToDoリストを作る
- [X] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [X] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること　⇒　仮実装
	- [X] 下端点1, 上端点10を指定して、整数閉区間構造体が作れること　⇒　三角測量
- [X] 上端点より下端点が多きときは、整数閉区間が作れないこと
	- [X] 下端点8, 上端点3を指定したときは、整数閉区間が作れないこと
	- ※C99のboolを使用して作れたかどうかを返す
- [ ] 指定した整数を含むかどうかを判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、5を含むと判定できること
	- [ ] 下端点3, 上端点8の整数閉区間が、10を含まないと判定できること
- ---
### ステップ①　テストコードを書く
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange8To3Failure) {
        // 前準備
        int lowerEndpoint = 8;
        int upperEndpoint = 3;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(false, created);
    }

    TEST(ClosedRangeTest, ClosedRange3To8Contains5) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 5;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(true, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8NotContains10) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 10;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(false, contained);
    }

}
```
- ---
### ステップ②　テストを失敗させる（RED）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 5 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 5 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotContains10
/mnt/c/Users/user/Documents/Workspace/Projects/TDDSeminar/ClosedRange/test/ClosedRange_test.cpp:69: Failure
Expected equality of these values:
  false
  contained
    Which is: true
[  FAILED  ] ClosedRangeTest.ClosedRange3To8NotContains10 (0 ms)
[----------] 5 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 5 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 4 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] ClosedRangeTest.ClosedRange3To8NotContains10

 1 FAILED TEST
```
- ---
### ステップ③　プロダクションコードを書く
```
#include "ClosedRange.h"

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return true;
}

bool closedRangeContains(struct ClosedRange* closedRange, int n)
{
    if (closedRange->lowerEndpoint < n && n < closedRange->upperEndpoint) {
        return true;
    } else {
        return false;
    }
}
```
- ---
### ステップ④　テストを成功させる（GREEN）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 5 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 5 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotContains10
[       OK ] ClosedRangeTest.ClosedRange3To8NotContains10 (0 ms)
[----------] 5 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 5 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 5 tests.
```
- ---
### ステップ⑤　リファクタリングする
- Cファイル
```
#include "ClosedRange.h"

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return true;
}

bool closedRangeContains(struct ClosedRange* closedRange, int n)
{
    // if (closedRange->lowerEndpoint < n && n < closedRange->upperEndpoint) {
    //     return true;
    // } else {
    //     return false;
    // }
    return (closedRange->lowerEndpoint < n && n < closedRange->upperEndpoint);
}
```
- テスト結果
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 5 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 5 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotContains10
[       OK ] ClosedRangeTest.ClosedRange3To8NotContains10 (0 ms)
[----------] 5 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 5 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 5 tests.
```
- ---
## 6週目
### ステップ⓪　ToDoリストを作る
- [X] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [X] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること　⇒　仮実装
	- [X] 下端点1, 上端点10を指定して、整数閉区間構造体が作れること　⇒　三角測量
- [X] 上端点より下端点が多きときは、整数閉区間が作れないこと
	- [X] 下端点8, 上端点3を指定したときは、整数閉区間が作れないこと
	- ※C99のboolを使用して作れたかどうかを返す
- [ ] 指定した整数を含むかどうかを判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、5を含むと判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、10を含まないと判定できること
	- [ ] 下端点3, 上端点8の整数閉区間が、境界値(3,8)を含むと判定できること　⇒　境界値
- ---
### ステップ①　テストコードを書く
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange8To3Failure) {
        // 前準備
        int lowerEndpoint = 8;
        int upperEndpoint = 3;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(false, created);
    }

    TEST(ClosedRangeTest, ClosedRange3To8Contains5) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 5;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(true, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8NotContains10) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 10;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(false, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8ContainsEndpoints) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 実行
        bool containedlowerEndpoint = closedRangeContains(&closedRange, lowerEndpoint);
        bool containedupperEndpoint = closedRangeContains(&closedRange, upperEndpoint);
        // 検証
        ASSERT_EQ(true, containedlowerEndpoint);
        ASSERT_EQ(true, containedupperEndpoint);
    }

}
```
- ---
### ステップ②　テストを失敗させる（RED）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 6 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 6 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotContains10
[       OK ] ClosedRangeTest.ClosedRange3To8NotContains10 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints
/mnt/c/Users/user/Documents/Workspace/Projects/TDDSeminar/ClosedRange/test/ClosedRange_test.cpp:82: Failure
Expected equality of these values:
  true
  containedlowerEndpoint
    Which is: false
[  FAILED  ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints (0 ms)
[----------] 6 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 6 tests from 1 test suite ran. (2 ms total)
[  PASSED  ] 5 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints

 1 FAILED TEST
```
- ---
### ステップ③　プロダクトコードを書く
```
#include "ClosedRange.h"

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return true;
}

bool closedRangeContains(struct ClosedRange* closedRange, int n)
{
    return (closedRange->lowerEndpoint <= n && n <= closedRange->upperEndpoint);
}
```
- ---
### ステップ④　テストを成功させる（GREEN）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 6 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 6 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotContains10
[       OK ] ClosedRangeTest.ClosedRange3To8NotContains10 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints
[       OK ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints (0 ms)
[----------] 6 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 6 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 6 tests.
```
- ---
### ステップ⑤　リファクタリングする
- 特になし
- ---
## 7週目
### ステップ⓪　ToDoリストを作る
- [X] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [X] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること　⇒　仮実装
	- [X] 下端点1, 上端点10を指定して、整数閉区間構造体が作れること　⇒　三角測量
- [X] 上端点より下端点が多きときは、整数閉区間が作れないこと
	- [X] 下端点8, 上端点3を指定したときは、整数閉区間が作れないこと
	- ※C99のboolを使用して作れたかどうかを返す
- [X] 指定した整数を含むかどうかを判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、5を含むと判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、10を含まないと判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、境界値(3,8)を含むと判定できること　⇒　境界値
- [ ] 整数閉区間の文字列表現を取得できること
	- [ ] 下端点3, 上端点8の整数閉区間の文字列表現"[3,8]"を取得できること
	- ※char[32]（int型の最小/最大値が-2147483648/2147483647のため）に文字列を格納する
- ---
### ステップ①　テストコードを書く
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange8To3Failure) {
        // 前準備
        int lowerEndpoint = 8;
        int upperEndpoint = 3;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(false, created);
    }

    TEST(ClosedRangeTest, ClosedRange3To8Contains5) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 5;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(true, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8NotContains10) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 10;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(false, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8ContainsEndpoints) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 実行
        bool containedlowerEndpoint = closedRangeContains(&closedRange, lowerEndpoint);
        bool containedupperEndpoint = closedRangeContains(&closedRange, upperEndpoint);
        // 検証
        ASSERT_EQ(true, containedlowerEndpoint);
        ASSERT_EQ(true, containedupperEndpoint);
    }

    TEST(ClosedRangeTest, StringifyClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        char str[32];
        // 実行
        stringifyClosedRange(&closedRange, str);
        // 検証
        ASSERT_STREQ("[3,8]", str);
    }

}
```
- ---
### ステップ②　テストを失敗させる（RED）
- stringifyClosedRange() が未定義のためビルドエラー（RED）
- ---
### ステップ③　プロダクトコードを書く
- 調子が出てきたので、一息に実装する。
```
#include "ClosedRange.h"
#include <stdio.h>

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return true;
}

bool closedRangeContains(struct ClosedRange* closedRange, int n)
{
    return (closedRange->lowerEndpoint <= n && n <= closedRange->upperEndpoint);
}

void stringifyClosedRange(struct ClosedRange* closedRange, char* str)
{
    sprintf(str, "[%d,%d]", closedRange->lowerEndpoint, closedRange->upperEndpoint);
}
```
- ---
### ステップ④　テストを成功させる（GREEN）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 7 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 7 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotContains10
[       OK ] ClosedRangeTest.ClosedRange3To8NotContains10 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints
[       OK ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints (0 ms)
[ RUN      ] ClosedRangeTest.StringifyClosedRange3To8
[       OK ] ClosedRangeTest.StringifyClosedRange3To8 (0 ms)
[----------] 7 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 7 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 7 tests.
```
- ---
### ステップ⑤　リファクタリングする
- テストコード
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange8To3Failure) {
        // 前準備
        int lowerEndpoint = 8;
        int upperEndpoint = 3;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(false, created);
    }

    TEST(ClosedRangeTest, ClosedRange3To8Contains5) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 5;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(true, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8NotContains10) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 10;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(false, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8ContainsEndpoints) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 実行
        bool containedlowerEndpoint = closedRangeContains(&closedRange, lowerEndpoint);
        bool containedupperEndpoint = closedRangeContains(&closedRange, upperEndpoint);
        // 検証
        ASSERT_EQ(true, containedlowerEndpoint);
        ASSERT_EQ(true, containedupperEndpoint);
    }

    TEST(ClosedRangeTest, StringifyClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        char str[32];
        // 実行
        // stringifyClosedRange(&closedRange, str);
        stringifyClosedRange(&closedRange, str, sizeof(str));
        // 検証
        ASSERT_STREQ("[3,8]", str);
    }

}
```
- ヘッダファイル
```
#ifndef GTEST_CLOSEDRANGE_H_
#define GTEST_CLOSEDRANGE_H_

#include <stdbool.h>
#include <stddef.h>

struct ClosedRange {
    int lowerEndpoint;
    int upperEndpoint;
};

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange);
bool closedRangeContains(struct ClosedRange* closedRange, int n);
// void stringifyClosedRange(struct ClosedRange* closedRange, char* str);
void stringifyClosedRange(struct ClosedRange* closedRange, char str[], size_t len);

#endif  // GTEST_CLOSEDRANGE_H_
```
- Cファイル
```
#include "ClosedRange.h"
#include <stdio.h>

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return true;
}

bool closedRangeContains(struct ClosedRange* closedRange, int n)
{
    return (closedRange->lowerEndpoint <= n && n <= closedRange->upperEndpoint);
}

// void stringifyClosedRange(struct ClosedRange* closedRange, char* str)
// {
//     sprintf(str, "[%d,%d]", closedRange->lowerEndpoint, closedRange->upperEndpoint);
// }

void stringifyClosedRange(struct ClosedRange* closedRange, char str[], size_t len)
{
    snprintf(str, len, "[%d,%d]", closedRange->lowerEndpoint, closedRange->upperEndpoint);
}
```
- テスト結果
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 7 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 7 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotContains10
[       OK ] ClosedRangeTest.ClosedRange3To8NotContains10 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints
[       OK ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints (0 ms)
[ RUN      ] ClosedRangeTest.StringifyClosedRange3To8
[       OK ] ClosedRangeTest.StringifyClosedRange3To8 (0 ms)
[----------] 7 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 7 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 7 tests.
```
- ---
## 8週目
### ステップ⓪　ToDoリストを作る
- [X] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [X] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること　⇒　仮実装
	- [X] 下端点1, 上端点10を指定して、整数閉区間構造体が作れること　⇒　三角測量
- [X] 上端点より下端点が多きときは、整数閉区間が作れないこと
	- [X] 下端点8, 上端点3を指定したときは、整数閉区間が作れないこと
	- ※C99のboolを使用して作れたかどうかを返す
- [X] 指定した整数を含むかどうかを判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、5を含むと判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、10を含まないと判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、境界値(3,8)を含むと判定できること　⇒　境界値
- [X] 整数閉区間の文字列表現を取得できること
	- [X] 下端点3, 上端点8の整数閉区間の文字列表現"[3,8]"を取得できること
	- ※char[32]（int型の最小/最大値が-2147483648/2147483647のため）に文字列を格納する
- [ ] 整数閉区間が別の整数閉区間と等価であるかどうかを判定できること
	- [ ] （下端点,上端点）=(3,8)の整数閉区間が、(3,8)の整数閉区間と等価であると判定できること
	- [ ] （下端点,上端点）=(3,8)の整数閉区間が、(2,10)の整数閉区間と等価でないと判定できること
- ---
### ステップ①　テストコードを書く
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange8To3Failure) {
        // 前準備
        int lowerEndpoint = 8;
        int upperEndpoint = 3;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(false, created);
    }

    TEST(ClosedRangeTest, ClosedRange3To8Contains5) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 5;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(true, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8NotContains10) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 10;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(false, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8ContainsEndpoints) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 実行
        bool containedlowerEndpoint = closedRangeContains(&closedRange, lowerEndpoint);
        bool containedupperEndpoint = closedRangeContains(&closedRange, upperEndpoint);
        // 検証
        ASSERT_EQ(true, containedlowerEndpoint);
        ASSERT_EQ(true, containedupperEndpoint);
    }

    TEST(ClosedRangeTest, StringifyClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        char str[32];
        // 実行
        stringifyClosedRange(&closedRange, str, sizeof(str));
        // 検証
        ASSERT_STREQ("[3,8]", str);
    }

    TEST(ClosedRangeTest, ClosedRange3To8EqualsClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        struct ClosedRange comparison;
        createClosedRange(3, 8, &comparison);
        // 実行
        bool equal = closedRangeEquals(&closedRange, &comparison);
        // 検証
        ASSERT_EQ(true, equal);
    }

    TEST(ClosedRangeTest, ClosedRange3To8NotEqualsClosedRange2To10) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        struct ClosedRange comparison;
        createClosedRange(2, 10, &comparison);
        // 実行
        bool equal = closedRangeEquals(&closedRange, &comparison);
        // 検証
        ASSERT_EQ(false, equal);
    }

}
```
- ---
### ステップ②　テストを失敗させる（RED）
- closedRangeEquals() が未定義のためビルドエラー（RED）
- ---
### ステップ③　プロダクションコードを書く
- ヘッダファイル
```
#ifndef GTEST_CLOSEDRANGE_H_
#define GTEST_CLOSEDRANGE_H_

#include <stdbool.h>
#include <stddef.h>

struct ClosedRange {
    int lowerEndpoint;
    int upperEndpoint;
};

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange);
bool closedRangeContains(struct ClosedRange* closedRange, int n);
void stringifyClosedRange(struct ClosedRange* closedRange, char str[], size_t len);
bool closedRangeEquals(struct ClosedRange* closedRange, struct ClosedRange* comparison);

#endif  // GTEST_CLOSEDRANGE_H_
```
- Cファイル
```
#include "ClosedRange.h"
#include <stdio.h>

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return true;
}

bool closedRangeContains(struct ClosedRange* closedRange, int n)
{
    return (closedRange->lowerEndpoint <= n && n <= closedRange->upperEndpoint);
}

void stringifyClosedRange(struct ClosedRange* closedRange, char str[], size_t len)
{
    snprintf(str, len, "[%d,%d]", closedRange->lowerEndpoint, closedRange->upperEndpoint);
}

bool closedRangeEquals(struct ClosedRange* closedRange, struct ClosedRange* comparison)
{
    return ((closedRange->lowerEndpoint == comparison->lowerEndpoint) && 
            (closedRange->upperEndpoint == comparison->upperEndpoint));
}
```
- ---
### ステップ④　テストを成功させる（GREEN）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 9 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 9 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotContains10
[       OK ] ClosedRangeTest.ClosedRange3To8NotContains10 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints
[       OK ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints (0 ms)
[ RUN      ] ClosedRangeTest.StringifyClosedRange3To8
[       OK ] ClosedRangeTest.StringifyClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8EqualsClosedRange3To8
[       OK ] ClosedRangeTest.ClosedRange3To8EqualsClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotEqualsClosedRange2To10
[       OK ] ClosedRangeTest.ClosedRange3To8NotEqualsClosedRange2To10 (0 ms)
[----------] 9 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 9 tests from 1 test suite ran. (1 ms total)
[  PASSED  ] 9 tests.
```
- ---
### ステップ⑤　リファクタリングする
- 特になし
- ---
## 9週目
### ステップ⓪　ToDoリストを作る
- [X] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [X] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること　⇒　仮実装
	- [X] 下端点1, 上端点10を指定して、整数閉区間構造体が作れること　⇒　三角測量
- [X] 上端点より下端点が多きときは、整数閉区間が作れないこと
	- [X] 下端点8, 上端点3を指定したときは、整数閉区間が作れないこと
	- ※C99のboolを使用して作れたかどうかを返す
- [X] 指定した整数を含むかどうかを判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、5を含むと判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、10を含まないと判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、境界値(3,8)を含むと判定できること　⇒　境界値
- [X] 整数閉区間の文字列表現を取得できること
	- [X] 下端点3, 上端点8の整数閉区間の文字列表現"[3,8]"を取得できること
	- ※char[32]（int型の最小/最大値が-2147483648/2147483647のため）に文字列を格納する
- [X] 整数閉区間が別の整数閉区間と等価であるかどうかを判定できること
	- [X] （下端点,上端点）=(3,8)の整数閉区間が、(3,8)の整数閉区間と等価であると判定できること
	- [X] （下端点,上端点）=(3,8)の整数閉区間が、(2,10)の整数閉区間と等価でないと判定できること
- [ ] 整数閉区間が別の整数閉区間に完全に含まれるかどうかを判定できること
	- [ ] （下端点,上端点）=(3,8)の整数閉区間が、(1,10)の整数閉区間に完全に含まれると判定できること
	- [ ] （下端点,上端点）=(3,8)の整数閉区間が、(5,7)の整数閉区間に完全に含まれないと判定できること
	- ※比較対象が等価(3,8)の場合は含まれることが明白であるためテストから除外する
- ---
### ステップ①　テストコードを書く
```
#include <limits.h>
#include <gtest/gtest.h>
extern "C" {
#include "../src/ClosedRange.h"
}

namespace {

    TEST(ClosedRangeTest, CreateClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 1;
        int upperEndpoint = 10;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(true, created);
        ASSERT_EQ(lowerEndpoint, closedRange.lowerEndpoint);
        ASSERT_EQ(upperEndpoint, closedRange.upperEndpoint);
    }

    TEST(ClosedRangeTest, CreateClosedRange8To3Failure) {
        // 前準備
        int lowerEndpoint = 8;
        int upperEndpoint = 3;
        struct ClosedRange closedRange;
        // 実行
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 検証
        ASSERT_EQ(false, created);
    }

    TEST(ClosedRangeTest, ClosedRange3To8Contains5) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 5;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(true, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8NotContains10) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        int n = 10;
        // 実行
        bool contained = closedRangeContains(&closedRange, n);
        // 検証
        ASSERT_EQ(false, contained);
    }

    TEST(ClosedRangeTest, ClosedRange3To8ContainsEndpoints) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        // 実行
        bool containedlowerEndpoint = closedRangeContains(&closedRange, lowerEndpoint);
        bool containedupperEndpoint = closedRangeContains(&closedRange, upperEndpoint);
        // 検証
        ASSERT_EQ(true, containedlowerEndpoint);
        ASSERT_EQ(true, containedupperEndpoint);
    }

    TEST(ClosedRangeTest, StringifyClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        char str[32];
        // 実行
        stringifyClosedRange(&closedRange, str, sizeof(str));
        // 検証
        ASSERT_STREQ("[3,8]", str);
    }

    TEST(ClosedRangeTest, ClosedRange3To8EqualsClosedRange3To8) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        struct ClosedRange comparison;
        createClosedRange(3, 8, &comparison);
        // 実行
        bool equal = closedRangeEquals(&closedRange, &comparison);
        // 検証
        ASSERT_EQ(true, equal);
    }

    TEST(ClosedRangeTest, ClosedRange3To8NotEqualsClosedRange2To10) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        struct ClosedRange comparison;
        createClosedRange(2, 10, &comparison);
        // 実行
        bool equal = closedRangeEquals(&closedRange, &comparison);
        // 検証
        ASSERT_EQ(false, equal);
    }

    TEST(ClosedRangeTest, ClosedRange3To8IsIncludedInClosedRange1To10) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        struct ClosedRange comparison;
        createClosedRange(1, 10, &comparison);
        // 実行
        bool isIncluded = closedRangeIsIncludedIn(&closedRange, &comparison);
        // 検証
        ASSERT_EQ(true, isIncluded);
    }

    TEST(ClosedRangeTest, ClosedRange3To8IsNotIncludedInClosedRange5To7) {
        // 前準備
        int lowerEndpoint = 3;
        int upperEndpoint = 8;
        struct ClosedRange closedRange;
        bool created = createClosedRange(lowerEndpoint, upperEndpoint, &closedRange);
        struct ClosedRange comparison;
        createClosedRange(5, 7, &comparison);
        // 実行
        bool isIncluded = closedRangeIsIncludedIn(&closedRange, &comparison);
        // 検証
        ASSERT_EQ(false, isIncluded);
    }

}
```
- ---
### ステップ②　テストを失敗させる（RED）
- closedRangeIsIncludedIn() が未定義のためビルドエラー（RED）
- ---
### ステップ③　プロダクションコードを書く
- ヘッダファイル
```
#ifndef GTEST_CLOSEDRANGE_H_
#define GTEST_CLOSEDRANGE_H_

#include <stdbool.h>
#include <stddef.h>

struct ClosedRange {
    int lowerEndpoint;
    int upperEndpoint;
};

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange);
bool closedRangeContains(struct ClosedRange* closedRange, int n);
void stringifyClosedRange(struct ClosedRange* closedRange, char str[], size_t len);
bool closedRangeEquals(struct ClosedRange* closedRange, struct ClosedRange* comparison);
bool closedRangeIsIncludedIn(struct ClosedRange* closedRange, struct ClosedRange* comparison);

#endif  // GTEST_CLOSEDRANGE_H_
```
- Cファイル
```
#include "ClosedRange.h"
#include <stdio.h>

bool createClosedRange(int lowerEndpoint, int upperEndpoint, struct ClosedRange* closedRange)
{
    if (lowerEndpoint > upperEndpoint) {
        return false;
    }
    closedRange->lowerEndpoint = lowerEndpoint;
    closedRange->upperEndpoint = upperEndpoint;
    return true;
}

bool closedRangeContains(struct ClosedRange* closedRange, int n)
{
    return (closedRange->lowerEndpoint <= n && n <= closedRange->upperEndpoint);
}

void stringifyClosedRange(struct ClosedRange* closedRange, char str[], size_t len)
{
    snprintf(str, len, "[%d,%d]", closedRange->lowerEndpoint, closedRange->upperEndpoint);
}

bool closedRangeEquals(struct ClosedRange* closedRange, struct ClosedRange* comparison)
{
    return ((closedRange->lowerEndpoint == comparison->lowerEndpoint) && 
            (closedRange->upperEndpoint == comparison->upperEndpoint));
}

bool closedRangeIsIncludedIn(struct ClosedRange* closedRange, struct ClosedRange* comparison)
{
    return ((closedRange->lowerEndpoint >= comparison->lowerEndpoint) &&
            (closedRange->upperEndpoint <= comparison->upperEndpoint));
}
```
- ---
### ステップ④　テストを成功させる（GREEN）
```
Running main() from /home/mayumi/git/googletest/googletest/src/gtest_main.cc
[==========] Running 11 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 11 tests from ClosedRangeTest
[ RUN      ] ClosedRangeTest.CreateClosedRange3To8
[       OK ] ClosedRangeTest.CreateClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange1To10
[       OK ] ClosedRangeTest.CreateClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.CreateClosedRange8To3Failure
[       OK ] ClosedRangeTest.CreateClosedRange8To3Failure (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8Contains5
[       OK ] ClosedRangeTest.ClosedRange3To8Contains5 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotContains10
[       OK ] ClosedRangeTest.ClosedRange3To8NotContains10 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints
[       OK ] ClosedRangeTest.ClosedRange3To8ContainsEndpoints (0 ms)
[ RUN      ] ClosedRangeTest.StringifyClosedRange3To8
[       OK ] ClosedRangeTest.StringifyClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8EqualsClosedRange3To8
[       OK ] ClosedRangeTest.ClosedRange3To8EqualsClosedRange3To8 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8NotEqualsClosedRange2To10
[       OK ] ClosedRangeTest.ClosedRange3To8NotEqualsClosedRange2To10 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8IsIncludedInClosedRange1To10
[       OK ] ClosedRangeTest.ClosedRange3To8IsIncludedInClosedRange1To10 (0 ms)
[ RUN      ] ClosedRangeTest.ClosedRange3To8IsNotIncludedInClosedRange5To7
[       OK ] ClosedRangeTest.ClosedRange3To8IsNotIncludedInClosedRange5To7 (0 ms)
[----------] 11 tests from ClosedRangeTest (0 ms total)

[----------] Global test environment tear-down
[==========] 11 tests from 1 test suite ran. (0 ms total)
[  PASSED  ] 11 tests.
```
- ---
### ステップ⑤　リファクタリング
- 特になし
- ---
## 終了
### ToDoリスト
- [X] 下端点と上端点を指定して、整数閉区間構造体が作れること
	- [X] 下端点3, 上端点8を指定して、整数閉区間構造体が作れること　⇒　仮実装
	- [X] 下端点1, 上端点10を指定して、整数閉区間構造体が作れること　⇒　三角測量
- [X] 上端点より下端点が多きときは、整数閉区間が作れないこと
	- [X] 下端点8, 上端点3を指定したときは、整数閉区間が作れないこと
	- ※C99のboolを使用して作れたかどうかを返す
- [X] 指定した整数を含むかどうかを判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、5を含むと判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、10を含まないと判定できること
	- [X] 下端点3, 上端点8の整数閉区間が、境界値(3,8)を含むと判定できること　⇒　境界値
- [X] 整数閉区間の文字列表現を取得できること
	- [X] 下端点3, 上端点8の整数閉区間の文字列表現"[3,8]"を取得できること
	- ※char[32]（int型の最小/最大値が-2147483648/2147483647のため）に文字列を格納する
- [X] 整数閉区間が別の整数閉区間と等価であるかどうかを判定できること
	- [X] （下端点,上端点）=(3,8)の整数閉区間が、(3,8)の整数閉区間と等価であると判定できること
	- [X] （下端点,上端点）=(3,8)の整数閉区間が、(2,10)の整数閉区間と等価でないと判定できること
- [X] 整数閉区間が別の整数閉区間に完全に含まれるかどうかを判定できること
	- [X] （下端点,上端点）=(3,8)の整数閉区間が、(1,10)の整数閉区間に完全に含まれると判定できること
	- [X] （下端点,上端点）=(3,8)の整数閉区間が、(5,7)の整数閉区間に完全に含まれないと判定できること
	- ※比較対象が等価(3,8)の場合は含まれることが明白であるためテストから除外する
- ---
## まとめ
- 疑問点
    - テストコードもリファクタリングの対象になる？
    - 関数のインターフェースが変わったときに、テストコードの書き直しが発生してしまう。
        - こういうのは設計で回避するべき？
    - 複数のテストケースを一回の繰り返しで解決してもよい？
    - 簡単な例だと、REDになるのはビルドエラーだけになってしまい、TDDの効果があまり分からない
    - プロダクションコードで最速を重視していくと、テストケースが膨大になってしまう
    - 次の目標を考える際には、現在の実装で失敗するテスト条件を設定すればいい？
        - すべての失敗するテスト条件を順番に洗い出せれば、テスト条件から仕様が導き出せる？
